<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nature's Nexus: Exploring the Bonds Between Science and Society</title>
    <link rel="stylesheet" type="text/css" href="styling.css">
    <!--Fonts-->
</head>
<body>

    <div class="landing-page">
        <h1>Nature's Nexus: Bonds Between Science and Society </h1>
        <h2>by Christopher Glenn L. Bedis</h2>
        <img class="character-landing" src="images/character-png.png">
        <div class="clouds">
            <img class="clouds1" src="images/clouds1.png">
            <img class="clouds2" src="images/clouds2.png">
       </div>
        <img id="button-start" src="images/LetsStart.png">
    </div>
    <audio id="click-sound" src="audio/gameStart.mp3"></audio>

    <script>
        document.getElementById('button-start').onclick = function() {
            var audio = document.getElementById('click-sound');
            audio.play();
        }
    </script>

<div id="game-container" style="display: none";>
    <audio id="bg-music" src="audio/littlleroot.mp3" autoplay loop></audio>
  <div class="frame">
    <div class="corner_topleft"></div>
    <div class="corner_topright"></div>
    <div class="corner_bottomleft"></div>
    <div class="corner_bottomright"></div>
    
    
    <div class="camera">
         
       <div class="map pixel-art">
        
        <div class="book-parent">
            <img class="box_sprite" src="images/book.png" id="bookParent">
          </div>

          <div id="book" class="book hidden">
            <div class="cover">
              <h1>Reflection</h1>
            </div>
            <div class="page">
              <p>
                Across Units 1, 2, and 3, my exploration of Science, Technology, and Society (STS) has been enriching and illuminating. Unit 1 laid the groundwork by delving into the fundamental principles of science and technology, the complexities of the physical and living environments, and the intricacies of human organization. Moving into Unit 2, I journeyed through
              </p>
              <p></p>
            </div>
            <div class="page">
              <img src="https://upload.wikimedia.org/wikipedia/commons/1/13/Blue_Fairy_Book-The_Brave_Little_Tailor-1.png" alt="The tailor prepares to squash the flies"/>
              <p>historical antecedents, witnessing the evolution of scientific thought from ancient times to modern eras each epoch</p>
              <p> leaving an indelible mark on human civilization. Unit 3 delved into the profound interplay between humanity and its technological creations, exploring themes such as human flourishing.</p>
            </div>
          </div> 

          <div class="character" facing="down" walking="true">
             <div class="shadow pixel-art"></div>
             <div class="character_spritesheet pixel-art"></div>
          </div>
          <div class="spriteFox">
            <img class="Fox_spritesheet" src="images/FoxSpriteSheet2.png" id="fox" alt="fox" >
        </div>
        <div class="questionMark">
            <img class="Mark" src="images/FoxSpriteSheet2.png" id="quest" alt="quest">
        </div>

       </div>
       <!--BG Design-->
       <div class="howtoPlay">
            <div class="titleInstruction">
                Welcome to the Game! Here's how to interact with NPCs and other elements:
            </div>
            <div class="instructions">
                <ul>
                    <li>Press <strong>'E'</strong> to interact with NPCs and trigger dialogue.
                    <li>Use arrow keys or WASD to move around. Hold down <strong>'Shift'</strong> while using arrow keys or WASD to run.</li>
                    <li>Have fun and enjoy your adventure!</li>
                </ul>
            </div>
       </div>
       <div class="clouds">
            <img class="clouds1" src="images/clouds1.png">
            <img class="clouds2" src="images/clouds2.png">
       </div>
       
     <div id="overlay" class="overlay">
        <div class="overlay-fox">
            <img class="img-fox" src="images/FoxSpriteSheet2.png" id="fox" alt="fox" >
        </div>
        <div class="overlay-character">
            <div class="character" facing="down" walking="true">
                <div class="shadow pixel-art"></div>
                <div class="character_spritesheet pixel-art"></div>
            </div>
        </div>
        <div class="overlay-content">
            <p id="dialogue" class="typewriter"></p>
        </div>
        <div class="units">
            <div class="unit1" id="unit1">Unit 1
            </div>
            <div class="unit1Modal">
                <button class="close-units">Close</button>
                <p class="titleStatement1">Unit 1 INTRODUCTION TO STS</p>
                <div class="statement1">
                    <div id="peekabo"></div>
                    <ol>
                        <li><strong> Nature of Science:</strong> Explores the fundamental principles and methodologies of scientific inquiry, including observation, experimentation, and theory-building.</li>
                        <li><strong> Nature of Mathematics:</strong> Discusses the role of mathematics in scientific exploration, emphasizing its use as a language for describing natural phenomena and solving practical problems.</li>
                        <li><strong> Nature of Technology:</strong> Examines the definition and characteristics of technology, highlighting its role as a tool for solving problems and enhancing human capabilities.</li>
                        <li><strong> The Physical Setting: </strong>  Investigates the physical environment in which science and technology operate, including the Earth's geology, atmosphere, and climate.</li>
                        <li><strong> The Living Environment:</strong> Explores the interactions between living organisms and their environments, focusing on ecosystems, biodiversity, and ecological relationships.</li>
                        <li><strong> The Human Organization: </strong>  Studies the social structures and institutions that shape human interactions with science, technology, and the environment, including governance, economics, and cultural beliefs.</li>
                    </ol>
                    <div id="peekaboo"></div>
                </div>
            </div>
            <div class="unit2">Unit 2
                <div class="unit2Modal">
                    <button class="close-units">Close</button>
                    <p class="titleStatement2">Unit 2 GENERAL CONCEPTS IN SCIENCE, TECHNOLOGY, AND SOCIETY</p>
                    <div class="statement1">
                        <ul>
                            <strong> 2.1 Ancient Times:</strong> <li> The origins of scientific inquiry and technological innovation in ancient civilizations such as Mesopotamia, Egypt, and Greece.</li>
                            <strong> 2.1 Medieval/Middle Ages:</strong> <li> Discusses the role of mathematics in scientific exploration, emphasizing its use as a language for describing natural phenomena and solving practical problems.</li>
                            <strong> Nature of Technology:</strong><li> Examines the definition and characteristics of technology, highlighting its role as a tool for solving problems and enhancing human capabilities.</li>
                            <strong> The Physical Setting: </strong> <li> Investigates the physical environment in which science and technology operate, including the Earth's geology, atmosphere, and climate.</li>
                            <strong> The Living Environment:</strong><li>Explores the interactions between living organisms and their environments, focusing on ecosystems, biodiversity, and ecological relationships.</li>
                            <strong> The Human Organization: </strong> <li>Studies the social structures and institutions that shape human interactions with science, technology, and the environment, including governance, economics, and cultural beliefs.</li>
                            <strong class="clickBelow">Click Below to Observe Copernican Revolution </strong>
                        </ul>
                        <br>
                        <button class="showPlanet" onclick="redirectToPlanets()">Copernican Revolution</button>
                    </div>
                </div>
            </div>
            <div class="unit3">Unit 3
                <div class="unit3Modal">
                    <button class="close-units">Close</button>
                    <p class="titleStatement3">Unit 3 SCIENCE, TECHNOLOGY, SOCIETY, AND THE HUMAN CONDITION</p>
                    <div class="statement1">
                        <ul>
                            <strong> Technology as a Mode of Revealing:</strong> <li> Explores how technology serves as a means to uncover, reveal, and understand aspects of the natural world and human society.</li>
                            <strong> Technology as Poiesis:</strong> <li> Applicable to Modern Technology?: Examines the concept of poiesis, or creative production, in the context of modern technology and its potential for shaping human existence.</li>
                            <strong> Questioning as the Piety of Thought:</strong><li> Discusses the importance of questioning and critical thinking in navigating the complexities of science, technology, and society.</li>
                            <strong> Enframing Way of Revealing in Modern Technology: </strong> <li> Investigates Heidegger's notion of "enframing" and its implications for understanding the role of technology in modern society.</li>
                            <strong> Human Person Swallowed by Technology:</strong><li>Explores the phenomenon of individuals becoming increasingly immersed in and dependent on technology, potentially leading to a loss of autonomy and agency.</li>
                            <strong> Art as a Way Out of Enframing: </strong> <li>Considers the role of art as a means of transcending the enframing influence of technology and reconnecting with aspects of human existence that lie beyond its grasp.</li>
                        </ul>
                        <br>
                    </div>
                </div>
            </div>
        </div>
        
        <p class="Guide">Press E to interact with the fox!</p>
        <button id="backButton">
            Close
        </button>
     </div>

       <div class="dpad">
          <div class="DemoDirectionUI flex-center">
                <button class="dpad-button dpad-left">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -0.5 13 13" shape-rendering="crispEdges">
                        <path class="Arrow_outline-top"  stroke="#5f5f5f" d="M1 0h11M0 1h1M12 1h1M0 2h1M12 2h1M0 3h1M12 3h1M0 4h1M12 4h1M0 5h1M12 5h1M0 6h1M12 6h1M0 7h1M12 7h1M0 8h1M12 8h1" />
                        <path class="Arrow_surface" stroke="#f5f5f5" d="M1 1h11M1 2h11M1 3h5M7 3h5M1 4h4M7 4h5M1 5h3M7 5h5M1 6h4M7 6h5M1 7h5M7 7h5M1 8h11" />
                        <path class="Arrow_arrow-inset"  stroke="#434343" d="M6 3h1M5 4h1M4 5h1" />
                        <path class="Arrow_arrow-body" stroke="#5f5f5f" d="M6 4h1M5 5h2M5 6h2M6 7h1" />
                        <path class="Arrow_outline-bottom" stroke="#434343" d="M0 9h1M12 9h1M0 10h1M12 10h1M0 11h1M12 11h1M1 12h11" />
                        <path class="Arrow_edge" stroke="#ffffff" d="M1 9h11" />
                        <path class="Arrow_front" stroke="#cccccc" d="M1 10h11M1 11h11" />
                    </svg>
                </button>
                <button class="dpad-button dpad-up">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -0.5 13 13" shape-rendering="crispEdges">
                        <path class="Arrow_outline-top"  stroke="#5f5f5f" d="M1 0h11M0 1h1M12 1h1M0 2h1M12 2h1M0 3h1M12 3h1M0 4h1M12 4h1M0 5h1M12 5h1M0 6h1M12 6h1M0 7h1M12 7h1M0 8h1M12 8h1" />
                        <path class="Arrow_surface" stroke="#f5f5f5" d="M1 1h11M1 2h11M1 3h11M1 4h5M7 4h5M1 5h4M8 5h4M1 6h3M9 6h3M1 7h11M1 8h11" />
                        <path class="Arrow_arrow-inset"  stroke="#434343" d="M6 4h1M5 5h1M7 5h1" />
                        <path class="Arrow_arrow-body" stroke="#5f5f5f" d="M6 5h1M4 6h5" />
                        <path class="Arrow_outline-bottom" stroke="#434343" d="M0 9h1M12 9h1M0 10h1M12 10h1M0 11h1M12 11h1M1 12h11" />
                        <path class="Arrow_edge" stroke="#ffffff" d="M1 9h11" />
                        <path class="Arrow_front" stroke="#cccccc" d="M1 10h11M1 11h11" />
                    </svg>
                </button>
                <button class="dpad-button dpad-down">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -0.5 13 13" shape-rendering="crispEdges">
                        <path class="Arrow_outline-top" stroke="#5f5f5f" d="M1 0h11M0 1h1M12 1h1M0 2h1M12 2h1M0 3h1M12 3h1M0 4h1M12 4h1M0 5h1M12 5h1M0 6h1M12 6h1M0 7h1M12 7h1M0 8h1M12 8h1" />
                        <path class="Arrow_surface" stroke="#f5f5f5" d="M1 1h11M1 2h11M1 3h11M1 4h3M9 4h3M1 5h4M8 5h4M1 6h5M7 6h5M1 7h11M1 8h11" />
                        <path class="Arrow_arrow-inset" stroke="#434343" d="M4 4h5" />
                        <path class="Arrow_arrow-body" stroke="#5f5f5f" d="M5 5h3M6 6h1" />
                        <path class="Arrow_outline-bottom" stroke="#434343" d="M0 9h1M12 9h1M0 10h1M12 10h1M0 11h1M12 11h1M1 12h11" />
                        <path class="Arrow_edge" stroke="#ffffff" d="M1 9h11" />
                        <path class="Arrow_front" stroke="#cccccc" d="M1 10h11M1 11h11" />
                    </svg>
                </button>
                <button class="dpad-button dpad-right">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -0.5 13 13" shape-rendering="crispEdges">
                        <path class="Arrow_outline-top"  stroke="#5f5f5f" d="M1 0h11M0 1h1M12 1h1M0 2h1M12 2h1M0 3h1M12 3h1M0 4h1M12 4h1M0 5h1M12 5h1M0 6h1M12 6h1M0 7h1M12 7h1M0 8h1M12 8h1" />
                        <path class="Arrow_surface" stroke="#f5f5f5" d="M1 1h11M1 2h11M1 3h5M7 3h5M1 4h5M8 4h4M1 5h5M9 5h3M1 6h5M8 6h4M1 7h5M7 7h5M1 8h11" />
                        <path class="Arrow_arrow-inset"  stroke="#434343" d="M6 3h1M7 4h1M8 5h1" />
                        <path class="Arrow_arrow-body" stroke="#5f5f5f" d="M6 4h1M6 5h2M6 6h2M6 7h1" />
                        <path class="Arrow_outline-bottom" stroke="#434343" d="M0 9h1M12 9h1M0 10h1M12 10h1M0 11h1M12 11h1M1 12h11" />
                        <path class="Arrow_edge" stroke="#ffffff" d="M1 9h11" />
                        <path class="Arrow_front" stroke="#cccccc" d="M1 10h11M1 11h11" />
                    </svg>
                </button>
            </div>
       </div>
       
       <svg class="headline" xmlns="http://www.w3.org/2000/svg" viewBox="0 -0.5 75 14" shape-rendering="crispEdges">
 <metadata>Made with Pixels to Svg https://codepen.io/shshaw/pen/XbxvNj</metadata>
 <path stroke="rgba(128,191,255,0.01568627450980392)" d="M0 0h1M74 0h1M0 13h1M74 13h1" />
 <path stroke="#5f5f5f" d="M1 0h73M0 1h1M74 1h1M0 2h1M74 2h1M0 3h1M74 3h1M0 4h1M74 4h1M0 5h1M74 5h1M0 6h1M74 6h1M0 7h1M74 7h1M0 8h1M74 8h1M0 9h1M74 9h1M0 10h1M74 10h1M0 11h1M74 11h1" />
 <path stroke="#f5f5f5" d="M1 1h73M1 2h73M1 3h3M7 3h12M21 3h22M45 3h29M1 4h4M6 4h13M20 4h1M22 4h20M43 4h2M46 4h28M1 5h4M6 5h2M10 5h2M15 5h4M20 5h2M23 5h2M27 5h2M30 5h1M32 5h1M34 5h1M38 5h4M43 5h5M50 5h2M56 5h3M61 5h3M66 5h1M69 5h5M1 6h4M6 6h1M8 6h2M11 6h1M13 6h2M16 6h3M20 6h2M23 6h1M25 6h2M28 6h1M30 6h1M32 6h1M34 6h1M36 6h2M39 6h3M43 6h7M51 6h1M53 6h1M55 6h1M57 6h1M59 6h2M62 6h1M64 6h5M70 6h4M1 7h4M6 7h1M8 7h2M11 7h1M13 7h2M16 7h3M20 7h2M23 7h1M25 7h2M28 7h1M30 7h1M32 7h1M34 7h1M36 7h2M39 7h3M43 7h5M51 7h1M53 7h1M55 7h1M57 7h1M62 7h1M64 7h3M70 7h4M1 8h4M6 8h1M8 8h2M11 8h1M13 8h2M16 8h3M20 8h1M22 8h2M25 8h2M28 8h1M30 8h1M32 8h1M34 8h1M36 8h2M39 8h3M43 8h2M46 8h1M48 8h2M51 8h1M53 8h1M55 8h1M57 8h1M59 8h4M64 8h2M67 8h2M70 8h4M1 9h4M6 9h2M10 9h2M15 9h4M21 9h4M27 9h3M34 9h1M36 9h2M39 9h4M45 9h3M51 9h1M53 9h1M55 9h1M57 9h2M62 9h1M64 9h3M70 9h4M1 10h11M13 10h61M1 11h11M13 11h61" />
 <path stroke="#323234" d="M4 3h3M19 3h2M43 3h2M5 4h1M19 4h1M21 4h1M42 4h1M45 4h1M5 5h1M8 5h2M12 5h3M19 5h1M22 5h1M25 5h2M29 5h1M31 5h1M33 5h1M35 5h3M42 5h1M48 5h2M52 5h4M59 5h2M64 5h2M67 5h2M5 6h1M7 6h1M10 6h1M12 6h1M15 6h1M19 6h1M22 6h1M24 6h1M27 6h1M29 6h1M31 6h1M33 6h1M35 6h1M38 6h1M42 6h1M50 6h1M52 6h1M54 6h1M56 6h1M58 6h1M61 6h1M63 6h1M69 6h1M5 7h1M7 7h1M10 7h1M12 7h1M15 7h1M19 7h1M22 7h1M24 7h1M27 7h1M29 7h1M31 7h1M33 7h1M35 7h1M38 7h1M42 7h1M48 7h3M52 7h1M54 7h1M56 7h1M58 7h4M63 7h1M67 7h3M5 8h1M7 8h1M10 8h1M12 8h1M15 8h1M19 8h1M21 8h1M24 8h1M27 8h1M29 8h1M31 8h1M33 8h1M35 8h1M38 8h1M42 8h1M45 8h1M47 8h1M50 8h1M52 8h1M54 8h1M56 8h1M58 8h1M63 8h1M66 8h1M69 8h1M5 9h1M8 9h2M12 9h3M19 9h2M25 9h2M30 9h4M35 9h1M38 9h1M43 9h2M48 9h3M52 9h1M54 9h1M56 9h1M59 9h3M63 9h1M67 9h3M12 10h1M12 11h1" />
 <path stroke="#434343" d="M0 12h1M74 12h1M1 13h73" />
 <path stroke="#cccccc" d="M1 12h73" />
 </svg>      
    </div>
 </div>
</div>
<script>
    document.getElementById('book').addEventListener('click', function() {
  this.classList.toggle('open');
});
    // Add event listener to the start button
    document.getElementById("button-start").addEventListener("click", function() {
        // Hide the landing page
        document.querySelector(".landing-page").style.display = "none";
        
        // Show the game container
        document.getElementById("game-container").style.display = "block";
    });

    // Your game logic script goes here
    var character = document.querySelector(".character");
    
    document.querySelector('.unit1').addEventListener('click', function() {
    document.querySelector('.unit1Modal').style.display = 'block';
});

document.querySelector('.unit2').addEventListener('click', function() {
    document.querySelector('.unit2Modal').style.display = 'block';
});

document.querySelector('.unit3').addEventListener('click', function() {
    document.querySelector('.unit3Modal').style.display = 'block';
});

document.addEventListener('click', function(event) {
    if (event.target.classList.contains('close-units')) {
        // Find the parent modal container and hide it
        let modal = event.target.closest('.unit1Modal, .unit2Modal, .unit3Modal');
        if (modal) {
            modal.style.display = 'none';
        }
    }
});

function redirectToPlanets() {
    window.location.href = "planets.html";
}

function yScrollHandler(){
    var win = document.getElementById("peekaboo");
    if((window.pageYOffset + window.innerHeight) >= document.body.offsetHeight){
	//win.style.webkitTransition = "right 0.7s ease-in-out 0s";
	win.style.transition = "right 0.7s ease-in-out 0s";
	win.style.right = "0px";
    } else {
	win.style.transition = "right 0.7s ease-in-out 0s";
	win.style.right = "-90%";
    }
}
window.onscroll = yScrollHandler;

// Get the parent element
var bookParent = document.getElementById('bookParent');
// Get the book element
var book = document.getElementById('book');

// Add event listener to the parent element
bookParent.addEventListener('click', function() {
  // Toggle the class to show/hide the book
  book.classList.toggle('hidden');
});


</script> 

</body>
<script>

    var character = document.querySelector(".character");
    var map = document.querySelector(".map");
    
    //start in the middle of the map
    var x = 90;
    var y = 34;
    
    var held_directions = []; //State of which arrow keys we are holding down
    var speed = 1; //How fast the character moves in pixels per frame
    
    // Update the speed if Shift key is pressed
    document.addEventListener("keydown", (e) => {
        if (e.shiftKey) {
            speed = 2; // Change speed to 2 if Shift key is pressed
        }
    });
    
    document.addEventListener("keyup", (e) => {
        if (e.key === "Shift") {
            speed = 1; // Reset speed to 1 when Shift key is released
        }
    });
    

    const placeCharacter = () => {
        var pixelSize = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--pixel-size'));
    
        const held_direction = held_directions[0];
        if (held_direction) {
          if (held_direction === directions.right) {x += speed;}
          if (held_direction === directions.left) {x -= speed;}
          if (held_direction === directions.down) {y += speed;}
          if (held_direction === directions.up) {y -= speed;}
          character.setAttribute("facing", held_direction);
       }
        character.setAttribute("walking", held_direction ? "true" : "false");
    
        // Limits (gives the illusion of walls)
        var leftLimit = -8;
        var rightLimit = (16 * 11) + 8;
        var topLimit = -8 + 32;
        var bottomLimit = (16 * 7);
        if (x < leftLimit) { x = leftLimit; }
        if (x > rightLimit) { x = rightLimit; }
        if (y < topLimit) { y = topLimit; }
        if (y > bottomLimit) { y = bottomLimit; }
    
        var camera_left = pixelSize * 66;
        var camera_top = pixelSize * 42;
    
       map.style.transform = `translate3d( ${-x*pixelSize+camera_left}px, ${-y*pixelSize+camera_top}px, 0 )`;
       character.style.transform = `translate3d( ${x*pixelSize}px, ${y*pixelSize}px, 0 )`;  
    }
    
    const showOverlay = () => {
    // Calculate the distance between the character and the fox
    const characterRect = character.getBoundingClientRect();
    const foxRect = document.getElementById('fox').getBoundingClientRect();
    const distance = Math.sqrt(Math.pow(characterRect.x - foxRect.x, 2) + Math.pow(characterRect.y - foxRect.y, 2));
    
    // Define a threshold for interaction (adjust as needed)
    const interactionThreshold = 100; // Adjust this value as needed
    
    if(distance < interactionThreshold) {
        speed = 0;
    }

    // Check if the distance is less than the interaction threshold
    if (distance < interactionThreshold) {
        // Show the overlay
        document.getElementById("overlay").style.display = "block";
    }
    // If the distance is greater than the threshold, do nothing
}

    // Function to hide the overlay
    const hideOverlay = () => {
    document.getElementById("overlay").style.display = "none";
    }

    const goBack = () => {
    // Hide the overlay
    hideOverlay();
    // Implement logic to allow the player to be controlled again
    }

    const dialogueMessagesFox = [
    "Press Close to Go Back",
    "Character: Greetings, Fox! Have you delved into the lore of Science, Technology, and Society?",
    "Fox: Ah, yes! The tales that weave together the threads of our world's marvels.",
    "Character: Enlighten me with one such tale.",
    "Fox: You see, in the ancient forests where I roam, technology was simple yet harmonious with the land. But as humans expanded their reach, their inventions began to reshape the world.",
    "Character: Like the sprawling cities and bustling factories?",
    "Fox: Precisely. It's an imbalance that threatens to disrupt the delicate harmony of nature. Yet, amidst these adversities, there lies hope. By embracing the wisdom found in the annals of science, technology, and society, we can forge a path towards balance and understanding.",
    "Character: A journey through adversity towards enlightenment. Your words are profound, Fox.",
    "Fox: Indeed, young seeker. Let us embark on this journey together, guided by the light of knowledge and the wisdom of ages past. You can explore the resources below to navigate such challenges and avoid the pitfalls of imbalance."
];


let currentMessageIndex = 0;
const dialogueElement = document.getElementById('dialogue');

document.addEventListener("keydown", function(event) {
    if (event.key === "e") {
        currentMessageIndex = (currentMessageIndex + 1) % dialogueMessagesFox.length;
        dialogueElement.textContent = dialogueMessagesFox[currentMessageIndex];
    }
});

// Event listener for the "Go Back" button click
document.getElementById("backButton").addEventListener("click", goBack);

    // Event listener to interact with the fox when pressing the "E" key
    document.addEventListener("keydown", (e) => {
        if (e.key === "e") {
        // Show the overlay
        showOverlay();
        // You can add more interactions with the fox here if needed
    }
    });


    // Set up the game loop
    const step = () => {
        placeCharacter();
        window.requestAnimationFrame(() => {
            step();
        })
    }
    step(); // Kick off the first step
    
    /* Direction key state */
    const directions = {
        up: "up",
        down: "down",
        left: "left",
        right: "right",
    }
    
    const keys = {
        38: directions.up,   // Arrow Up
        87: directions.up,   // W key
        37: directions.left, // Arrow Left
        65: directions.left, // A key
        40: directions.down, // Arrow Down
        83: directions.down, // S key
        39: directions.right,// Arrow Right
        68: directions.right // D key
    }
    
    document.addEventListener("keydown", (e) => {
        var dir = keys[e.which];
        if (dir && held_directions.indexOf(dir) === -1) {
            held_directions.unshift(dir)
        }
    })
    
    document.addEventListener("keyup", (e) => {
        var dir = keys[e.which];
        var index = held_directions.indexOf(dir);
        if (index > -1) {
            held_directions.splice(index, 1)
        }
    });
    
    /* BONUS! Dpad functionality for mouse and touch */
    var isPressed = false;
    const removePressedAll = () => {
        document.querySelectorAll(".dpad-button").forEach(d => {
            d.classList.remove("pressed")
        })
    }
    document.body.addEventListener("mousedown", () => {
        isPressed = true;
    })
    document.body.addEventListener("mouseup", () => {
        isPressed = false;
        held_directions = [];
        removePressedAll();
    })
    const handleDpadPress = (direction, click) => {
        if (click) {
            isPressed = true;
        }
        held_directions = (isPressed) ? [direction] : []
    
        if (isPressed) {
            removePressedAll();
            document.querySelector(".dpad-"+direction).classList.add("pressed");
        }
    }
    </script>
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
      </script>
      <script defer src="/_vercel/insights/script.js"></script>
    </html>